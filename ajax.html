<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Ajax</title>
  <!--<link rel="stylesheet" type="text/css" title="Cool stylesheet" href="style.css">-->
</head>
<body>
  <a href="index.html">Homepage</a>
  <h1>Using XMLHTTPRequest to Consume a JSON Web Service, Ajax</h1>

  <h2>XMLHTTPRequest</h2>
<p>
  This example shows the loading of JSON string contained in a text file using HTTPRequest.
  (credit for example goes to W3Schools)
  <br />
  <i>
<br />    var xmlhttp = new XMLHttpRequest();
<br />    var url = "w3tutorial.txt";
<br />
<br />    xmlhttp.onreadystatechange = function() {
<br />    &nbsp;&nbsp;    if (this.readyState == 4 && this.status == 200) {
<br />    &nbsp;&nbsp;&nbsp;&nbsp;        var myArr = JSON.parse(this.responseText);
<br />    &nbsp;&nbsp;&nbsp;&nbsp;        myFunction(myArr);
<br />    &nbsp;&nbsp;    }
<br />    };
<br />    xmlhttp.open("GET", url, true);
<br />    xmlhttp.send();
<br />
<br />    function myFunction(arr) {
<br />    &nbsp;&nbsp;    var out = "";
<br />    &nbsp;&nbsp;    var i;
<br />    &nbsp;&nbsp;    for(i = 0; i < arr.length; i++) {
<br />    &nbsp;&nbsp;&nbsp;&nbsp;        out += '&lta href="' + arr[i].url + '"&gt' +
<br />    &nbsp;&nbsp;&nbsp;&nbsp;        arr[i].display + '&lt/a&gt&ltbr&gt';
<br />    &nbsp;&nbsp;    }
<br />    &nbsp;&nbsp;    document.getElementById("id01").innerHTML = out;
<br />    }
  </i>
</p>
  <div id="id01"></div>

  <script>
  var xmlhttp = new XMLHttpRequest();
  var url = "w3tutorial.txt";

  xmlhttp.onreadystatechange = function() {
      if (this.readyState == 4 && this.status == 200) {
          var myArr = JSON.parse(this.responseText);
          myFunction(myArr);
      }
  };
  xmlhttp.open("GET", url, true);
  xmlhttp.send();

  function myFunction(arr) {
      var out = "";
      var i;
      for(i = 0; i < arr.length; i++) {
          out += '<a href="' + arr[i].url + '">' +
          arr[i].display + '</a><br>';
      }
      document.getElementById("id01").innerHTML = out;
  }
  </script>
  <p>
    A page containing useful XMLHTTPRequest methods can be found <a href='https://www.tutorialspoint.com/ajax/what_is_xmlhttprequest.htm'>here</a>.
  </p>
  <h2>Ajax</h2>
  <p>
    Ajax (<b>A</b>synchronous <b>Ja</b>vaScript and <b>X</b>ML)can be used to perform many of the same request performed by XMLHTTPRequest.
    Unlike the traditional method Ajax can be used to perform Asynchronous request.  This allows the parts of a webpage that are affected
    to be upated without the need of refreshing the page.  As a result the end user experience is much faster and smoother.
    <br /><br />
    <a href='https://www.w3schools.com/xml/ajax_intro.asp'>WeSchools</a> has a good chapter on this topic.
    A quick guide (though perhaps slightly outdated) on Ajax can be found <a href='https://www.tutorialspoint.com/ajax/ajax_quick_guide.htm'>here</a>.
  </p>
  <br />
  <p>
    Here is a simple example function to load data from a text file using Ajax.<br /><br />
    (Credit for example goes to W3Schools)<br />
    <i>
      <br />function loadDoc() {
        <br />&nbsp;&nbsp;  var xhttp = new XMLHttpRequest();
        <br />&nbsp;&nbsp;  xhttp.onreadystatechange = function() {
          <br />&nbsp;&nbsp;&nbsp;&nbsp;    if (this.readyState == 4 && this.status == 200) {
            <br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      document.getElementById("demo2").innerHTML =
            <br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      this.responseText;
          <br />&nbsp;&nbsp;&nbsp;&nbsp;    }
        <br />&nbsp;&nbsp;  };
        <br />&nbsp;&nbsp;  xhttp.open("GET", "ajax_info.txt", true);
        <br />&nbsp;&nbsp;  xhttp.send();
      <br />}
    </i>
  </p>

  <div id="demo2">
  <h3>Ajax Demo</h3>
  <button type="button" onclick="loadDoc()">Change Content</button>
  </div>

  <script>
  function loadDoc() {
    var xhttp = new XMLHttpRequest();
    xhttp.onreadystatechange = function() {
      if (this.readyState == 4 && this.status == 200) {
        document.getElementById("demo2").innerHTML =
        this.responseText;
      }
    };
    xhttp.open("GET", "ajax_info.txt", true);
    xhttp.send();
  }
  </script>
<!--
  <div id="root"></div>
  <script src="main.js" type="text/javascript"></script>
-->
</body>
</html>
